% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stats_tests.R
\name{test_stats}
\alias{test_stats}
\title{Perform ANOVA or Kruskal-Wallis test and group comparison}
\usage{
test_stats(
  data,
  value_col = "PM_LEAF_PC",
  trt_col = "xp_trt_code",
  alpha = 0.05,
  group_method = "SNK",
  force_test = NULL,
  verbose = TRUE
)
}
\arguments{
\item{data}{A data.frame with at least a column of values and a grouping factor.}

\item{value_col}{Column name (string) with numeric values.}

\item{trt_col}{Column name (string) with grouping (default: "xp_trt_code").}

\item{alpha}{Significance threshold (default = 0.05).}

\item{group_method}{"SNK" or "LSD" for ANOVA; always "kruskal" for Kruskal-Wallis.}

\item{force_test}{Force "anova" or "kruskal" (bypass assumptions).}

\item{verbose}{Logical. If TRUE, prints diagnostic messages.}
}
\value{
A list with the following elements:
\itemize{
\item test A string indicating the test used: "Anova", "Kruskal", or "Non applicable".
\item p_value The p-value of the global test.
\item groupes A data.frame with three columns: \code{modality}, \code{mean}, and \code{groups}. The \code{groups} column contains statistical group letters.
}

A list with test name, p-value and group letters.
}
\description{
This function performs an ANOVA or Kruskal-Wallis test depending on the assumptions of normality and homoscedasticity.
It then returns a summary of statistical groups using a post-hoc SNK test (for ANOVA) or Kruskal-Conover test.
}
\details{
If \verb{xp _trt_code} is not provided, it is inferred from the \code{plot_id} column:
numeric plot codes are extracted from the beginning of the string (e.g. "10A" to 10),
and "TNT" is used directly for untreated control plots.

Group comparison is only meaningful if the global test (ANOVA or Kruskal-Wallis) is statistically significant.
}
