<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>startbox • startbox</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="startbox_files/libs/clipboard/clipboard.min.js"></script><script src="startbox_files/libs/quarto-html/popper.min.js"></script><script src="startbox_files/libs/quarto-html/tippy.umd.min.js"></script><link href="startbox_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="startbox_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="startbox">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Passer au contenu</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Navigation sur le site"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">startbox</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Activer la navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/startbox.html">Prise en main</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Référence</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Rechercher sur le site" placeholder="Rechercher" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>startbox</h1>





      <div class="d-none name"><code></code></div>
    </div>






    <section class="section level2"><h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Le package {startbox} est dédié à la gestion et à l’analyse des données d’essais en protection phytosanitaire, en particulier pour la vigne.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">startbox</span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="section level2"><h2 id="manipulation-des-données">Manipulation des données<a class="anchor" aria-label="anchor" href="#manipulation-des-donn%C3%A9es"></a>
</h2>
<p>Le package <code>{startbox}</code> propose plusieurs fonctions pour charger, importer et exporter des données en interaction avec un fichier standard Excel.</p>
<section class="level2"><h3 id="exporter-le-fichier-excel-standard">Exporter le fichier Excel standard<a class="anchor" aria-label="anchor" href="#exporter-le-fichier-excel-standard"></a>
</h3>
<p>Le package fonctionne avec un fichier Excel standard, qui stocke les données descriptives de l’essai (les modalités mises en place, les caractéristiques de la parcelle, le plan d’expérience) et les données observées. Ce modèle de fichier standard est accessible avec la fonction get_template_excel().</p>
<p>Vous pourrez compléter ultérieurement ce fichier directement dans Excel.</p>
</section><section class="level2"><h3 id="créer-un-objet-user_data">Créer un objet <code>user_data</code>
<a class="anchor" aria-label="anchor" href="#cr%C3%A9er-un-objet-user_data"></a>
</h3>
<p>Le package fonctionne avec un objet de classe <code>user_data</code>. Cet objet permet de manipuler dans l’environnement R les données d’observations et les métadonnées associées à un essai.</p>
<p>Deux cas sont possibles lors de la création :</p>
<section class="level3"><h4 id="cas-1-sans-fichier-excel">Cas 1 : Sans fichier Excel<a class="anchor" aria-label="anchor" href="#cas-1-sans-fichier-excel"></a>
</h4>
<p>On peut décider de créer l’objet ‘user_data’ dans le cas où nous voulons commencer la suivie d’un essai où que nous n’avons pas besoins de charger les données du fichiers Excel (données d’observations et données sur les placettes et modalités (métadonnées)). Dans ce cas on se basera sur le fichier Excel, qui est le fichier vierge sans données simplement les feuilles et les tableaux de précréé. On crée dans ce cas la classe de cette manière :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cas 1 : création d'un objet vide</span></span>
<span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu">startbox</span><span class="fu">::</span><span class="va"><a href="../reference/user_data.html">user_data</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; 📄 No file provided. Using default template.</span></span></code></pre></div>
</div>
<p>On lui affecte un nom au départ (ici mydata) que nous réutiliserons tout au long de l’utilisation du package.</p>
</section><section class="level3"><h4 id="cas-2-avec-un-fichier-excel-fourni">Cas 2 : Avec un fichier Excel fourni<a class="anchor" aria-label="anchor" href="#cas-2-avec-un-fichier-excel-fourni"></a>
</h4>
<p>On décide de créer l’objet ‘user_data’ dans le cas où nous avons déjà un fichier Excel comprenant les données d’un essai. On crée la classe de l’objet de cette façon, en mettant dans le ‘trial_file’ le chemin de notre fichier Excel :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cas 2 : création d'un objet avec fichier Excel existant</span></span>
<span><span class="va">mydata2</span> <span class="op">&lt;-</span> <span class="fu">startbox</span><span class="fu">::</span><span class="va"><a href="../reference/user_data.html">user_data</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>trial_file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,<span class="st">"standard_exemple.xlsx"</span>,package<span class="op">=</span><span class="st">"startbox"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; 📄 Using provided Excel file: standard_exemple.xlsx</span></span></code></pre></div>
</div>
<p>On lui affecte un nom au départ (ici mydata2) que nous réutiliserons tout au long de l’utilisation du package.</p>
<p>Lorsqu’on a créé l’objet avec un fichier Excel nous avons plusieurs options qui se proposent à nous, le chargement des données d’observations et le chargement des métadonnées.</p>
<section class="level4"><h5 id="charger-les-feuilles-dobservations">Charger les feuilles d’observations<a class="anchor" aria-label="anchor" href="#charger-les-feuilles-dobservations"></a>
</h5>
<p>La fonction <code>load_data_sheets</code> permet de charger dans l’environnement de travail toutes les feuilles dont le nom commence par ‘data_’. On passe en paramètre de la fonction le nom que nous avons donné à l’objet (ici mydata).</p>
<p>Elles sont stockées dans l’objet de classe <code>user_data.</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/load_data_sheets.html">load_data_sheets</a></span><span class="op">(</span><span class="va">mydata2</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ️ No sheets starting with 'data_' found in file.</span></span></code></pre></div>
</div>
</section><section class="level4"><h5 id="charger-les-métatadonnées">Charger les métatadonnées<a class="anchor" aria-label="anchor" href="#charger-les-m%C3%A9tatadonn%C3%A9es"></a>
</h5>
<p>Les feuilles de métadonnées (placette, modalite) peuvent être chargées dans l’environnement R à tout moment à l’aide de la fonction <code>load_metadata_sheets</code>, en passant en paramètre le nom que nous avons donné à l’objet <code>user_data</code> (ici mydata2). Il est nécessaire qu’un fichier ait été transmit dans trial_file sinon ça ne fonctionnera pas.</p>
<p>Elles sont stockées dans l’objet de classe <code>user_data.</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/load_metadata_sheets.html">load_metadata_sheets</a></span><span class="op">(</span><span class="va">mydata2</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✅ Sheet 'placette' loaded into metadata$placette.</span></span>
<span><span class="co">#&gt; ✅ Sheet 'modalite' loaded into metadata$modalite.</span></span></code></pre></div>
</div>
</section><section class="level4"><h5 id="utiliser-le-wrapper-complet-pour-charger-les-données">Utiliser le wrapper complet pour charger les données<a class="anchor" aria-label="anchor" href="#utiliser-le-wrapper-complet-pour-charger-les-donn%C3%A9es"></a>
</h5>
<p>Pour automatiser l’ensemble des étapes de chargement des données, la fonction <code>wrapper_data</code> permet de réaliser les fonctions <code>load_metadata_sheets</code> et <code>load_data_sheets</code> en une seule commande.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/wrapper_data.html">wrapper_data</a></span><span class="op">(</span><span class="va">mydata2</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ️ No sheets starting with 'data_' found in file.</span></span>
<span><span class="co">#&gt; ✅ Sheet 'placette' loaded into metadata$placette.</span></span>
<span><span class="co">#&gt; ✅ Sheet 'modalite' loaded into metadata$modalite.</span></span></code></pre></div>
</div>
</section></section></section><section class="level2"><h3 id="importer-des-données-dobservation">Importer des données d’observation<a class="anchor" aria-label="anchor" href="#importer-des-donn%C3%A9es-dobservation"></a>
</h3>
<section class="level3"><h4 id="cas-de-données-déjà-standardisées">Cas de données déjà standardisées<a class="anchor" aria-label="anchor" href="#cas-de-donn%C3%A9es-d%C3%A9j%C3%A0-standardis%C3%A9es"></a>
</h4>
<p>Il est possible d’ajouter directement un tableau de données (<code>data.frame</code>) dans l’attribut <code>obs_data</code> de l’objet <code>user_data.</code> Cela peut être pratique si l’utilisateur travaille avec un fichier <code>.csv</code> brut ou des données créées directement dans R. Pour être utilisable par la suite, le tableau de données doit contenir les colonnes plot_id, observation_date et au moins une colonne avec une variable mesurée.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Exemple : chargement d'un fichier CSV local</span></span>
<span><span class="va">myfilepath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,<span class="st">"teisso_2024_dataF2.csv"</span>,package<span class="op">=</span><span class="st">"startbox"</span><span class="op">)</span></span>
<span><span class="va">data1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv2</a></span><span class="op">(</span><span class="va">myfilepath</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Ajout direct dans l'objet user_data avec le nom du fichier</span></span>
<span><span class="va">mydata2</span><span class="op">$</span><span class="fu">add_obs</span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">myfilepath</span><span class="op">)</span>, df <span class="op">=</span> <span class="va">data1</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✅ Adding a new element: teisso_2024_dataF2.csv</span></span></code></pre></div>
</div>
<p>L’utilisateur pourra ultérieurement exporter le fichier Excel standardisé avec une nouvelle feuille qui contiendra ces données d’observations.</p>
</section><section class="level3"><h4 id="cas-des-données-topvigne">Cas des données Topvigne<a class="anchor" aria-label="anchor" href="#cas-des-donn%C3%A9es-topvigne"></a>
</h4>
<p>Les données d’observation peuvent aussi provenir de l’application Topvigne.</p>
<p>Il est possible d’utiliser la fonction <code>standardise_topvigne_csv</code> qui permet de transformer et standardiser les données collectées avec Topvigne.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,<span class="st">"maladie_teisso_2024_11h12min_F1_17.06.csv"</span>,package<span class="op">=</span><span class="st">"startbox"</span><span class="op">)</span></span>
<span><span class="co"># verification si le fichier est issu de topvigne &amp; importation </span></span>
<span><span class="va">data_F1</span> <span class="op">&lt;-</span> <span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/standardise_topvigne_csv.html">standardise_topvigne_csv</a></span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_F1</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span><span class="co">#&gt;   PM_LEAF_PC bbch_stage plot_id plot_block observation_date experiment_id</span></span>
<span><span class="co">#&gt;        &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;            &lt;chr&gt;        </span></span>
<span><span class="co">#&gt; 1          1 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 2          3 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 3          1 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 4          1 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 5          2 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 6          2 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: Observateurs &lt;chr&gt;, Scribe &lt;chr&gt;</span></span></code></pre></div>
</div>
<p>Les données sont ensuite ajoutées à l’objet <code>user_data</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ajout direct dans l'objet user_data avec le nom du fichier</span></span>
<span><span class="va">mydata2</span><span class="op">$</span><span class="fu">add_obs</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"F1"</span>, df <span class="op">=</span> <span class="va">data_F1</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✅ Adding a new element: F1</span></span></code></pre></div>
</div>
</section></section><section class="level2"><h3 id="exporter-les-données">Exporter les données<a class="anchor" aria-label="anchor" href="#exporter-les-donn%C3%A9es"></a>
</h3>
<p>La fonction export_data_sheets permet de créer une nouvelle version du fichier Excel en y ajoutant les feuilles d’observations présentes dans l’objet. Si un fichier Excel a été fourni lors de la création de l’objet, c’est celui-ci qui sera utilisé comme base. Dans le cas contraire, un fichier Excel vierge sera utilisé par défaut. Le fichier est exporté avec un horodatage automatique.</p>
</section></section><section class="section level2"><h2 id="calculer-les-tableaux-de-résumé">Calculer les tableaux de résumé<a class="anchor" aria-label="anchor" href="#calculer-les-tableaux-de-r%C3%A9sum%C3%A9"></a>
</h2>
<p>Le jeu de données d’observation qui sera utilisé à titre d’exemple est le jeu de données d’observation des notations brutes de mildiou sur feuilles réalisées le 17 juin 2024, préalablement importé dans <code>mydata2</code>.</p>
<p>Par commodité, il est stocké dans le <code>dataframe</code> data_F1.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_F1</span> <span class="op">&lt;-</span><span class="va">mydata2</span><span class="op">$</span><span class="va">obs_data</span><span class="op">$</span><span class="va">F1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_F1</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 8</span></span>
<span><span class="co">#&gt;   PM_LEAF_PC bbch_stage plot_id plot_block observation_date experiment_id</span></span>
<span><span class="co">#&gt;        &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;            &lt;chr&gt;        </span></span>
<span><span class="co">#&gt; 1          1 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 2          3 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 3          1 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 4          1 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 5          2 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 6          2 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: Observateurs &lt;chr&gt;, Scribe &lt;chr&gt;</span></span></code></pre></div>
</div>
<section class="level3"><h4 id="préparation-des-données-avant-analyse">Préparation des données avant analyse<a class="anchor" aria-label="anchor" href="#pr%C3%A9paration-des-donn%C3%A9es-avant-analyse"></a>
</h4>
<p>Pour analyser les données observées, il est nécessaire d’associer chaque placette à une modalité expérimentale.</p>
<section class="level4"><h5 id="par-association-avec-les-tables-descriptives-de-lessai">Par association avec les tables descriptives de l’essai<a class="anchor" aria-label="anchor" href="#par-association-avec-les-tables-descriptives-de-lessai"></a>
</h5>
</section><section class="level4"><h5 id="par-décodage-des-identifiants-de-placette-non-recommandé">Par décodage des identifiants de placette [non recommandé]<a class="anchor" aria-label="anchor" href="#par-d%C3%A9codage-des-identifiants-de-placette-non-recommand%C3%A9"></a>
</h5>
<p>Si la table d’association entre les identifiants des placettes et les modalités n’existe pas, il est possible de décoder les identifiants des placettes pour en extraire la partie concernant le code de la modalité.</p>
<p>Dans notre exemple, les identifiants de placette <code>plot_id</code> ont un codage du type “1A”, ou 1 est le code de la modalité, et A le code du bloc. Les noms de bloc sont donnés dans la colonne <code>plot_block</code></p>
<p>La fonction <code>remove_string_pairwise</code> permet d’enlever le nom du bloc de <code>plot_id</code>.</p>
<p>Avant de poursuivre, il est possible d’extraire quelques informations de plot_id pour enrichir notre tableau avec le code du traitement et le code du bloc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># recuperation des codes des traitements dans la colonne xp_trt_code</span></span>
<span><span class="va">data_F1</span><span class="op">$</span><span class="va">xp_trt_code</span> <span class="op">&lt;-</span> <span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/remove_string_pairwise.html">remove_string_pairwise</a></span><span class="op">(</span>vec<span class="op">=</span><span class="va">data_F1</span><span class="op">$</span><span class="va">plot_id</span>,</span>
<span>                                              pattern <span class="op">=</span> <span class="va">data_F1</span><span class="op">$</span><span class="va">plot_block</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Strings extracted are : 10 ; 1 ; 2 ; 3 ; 4 ; 5 ; 6 ; 7 ; 8 ; 9 ; TNT"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">data_F1</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 9</span></span>
<span><span class="co">#&gt;   PM_LEAF_PC bbch_stage plot_id plot_block observation_date experiment_id</span></span>
<span><span class="co">#&gt;        &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;            &lt;chr&gt;        </span></span>
<span><span class="co">#&gt; 1          1 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 2          3 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 3          1 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 4          1 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 5          2 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; 6          2 BBCH 71    A10     A          17/06/2024       teisso_2024  </span></span>
<span><span class="co">#&gt; # ℹ 3 more variables: Observateurs &lt;chr&gt;, Scribe &lt;chr&gt;, xp_trt_code &lt;chr&gt;</span></span></code></pre></div>
</div>
<div>
<blockquote>
<p><strong>Caution</strong></p>
<p>Cette fonction est à utiliser avec précaution ! Dans tous les cas, il est préférable de <strong>compléter les feuilles placette et modalité</strong> dans le fichier standard. Cela permet en outre d’enrichir les données avec le nom des traitements et la position des placettes.</p>
</blockquote>
</div>
</section></section><section class="level2"><h3 id="fonctions-de-calcul">Fonctions de calcul<a class="anchor" aria-label="anchor" href="#fonctions-de-calcul"></a>
</h3>
<section class="level3"><h4 id="description-des-fonctions">Description des fonctions<a class="anchor" aria-label="anchor" href="#description-des-fonctions"></a>
</h4>
<p>Le tableau ci-dessous résume les fonctions intégrées au package :</p>
<table class="table caption-top">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead><tr class="header">
<th>Calcul</th>
<th>Fonction {startbox}</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Fréquence d’attaque</td>
<td><code>incidence</code></td>
<td>Cette fonction calcule la fréquence de la maladie dans la population observée, c’est à dire le nombre d’unités échantillonnées (feuilles, régimes, plantes…) atteintes exprimé en pourcentage du nombre total d’unités évaluées.</td>
</tr>
<tr class="even">
<td>Intensité d’attaque</td>
<td><code>intensity</code></td>
<td>Cette fonction calcule l’intensité de la maladie, comme la valeur moyenne des mesures de séverité. L’intensité de la maladie correspond à la quantité de maladie présente dans la population, exprimée en pourcentage.</td>
</tr>
<tr class="odd">
<td>Efficacité</td>
<td><code>efficacy</code></td>
<td>Cette fonction calcule l’efficacité, c’est à dire le niveau de réduction des organismes nuisibles ciblés ou des dommages qu’ils causent à la plante, après application d’un traitement, par rapport à un témoin non traité. L’efficacité est exprimée en pourcentage.</td>
</tr>
<tr class="even">
<td>Sévérité sur les unités malades</td>
<td><code>severity_diseased</code></td>
<td>Cette fonction calcule la séverité de la maladie, comme la valeur moyenne des mesures de séverité pour les unités malades UNIQUEMENT (feuilles, grappes, plantes…). La ​​séverité de la maladie correspond à la superficie d’une unité d’échantillonnage affectée par la maladie, exprimée en pourcentage de la superficie totale.</td>
</tr>
</tbody>
</table></section><section class="level3"><h4 id="exemples-de-calcul">Exemples de calcul<a class="anchor" aria-label="anchor" href="#exemples-de-calcul"></a>
</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">obs_moda</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">10</span>,<span class="fl">5</span>,<span class="fl">0</span>,<span class="fl">2</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">15</span>,<span class="fl">20</span>,<span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">obs_tnt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">20</span>,<span class="fl">60</span>,<span class="fl">0</span>,<span class="fl">100</span>,<span class="fl">50</span>,<span class="fl">0</span>,<span class="fl">20</span>,<span class="fl">0</span>,<span class="fl">10</span>,<span class="fl">20</span>,<span class="fl">15</span>,<span class="fl">2</span>,<span class="fl">50</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">obs_moda</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 42.85714</span></span>
<span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/intensity.html">intensity</a></span><span class="op">(</span><span class="va">obs_moda</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7.285714</span></span>
<span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/severity_diseased.html">severity_diseased</a></span><span class="op">(</span><span class="va">obs_moda</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 17</span></span>
<span></span>
<span><span class="co"># l'efficacité est calculée en comparant une valeur dans une modalité à la valeur de la même variable obtentue dans le témoin non traité</span></span>
<span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/efficacy.html">efficacy</a></span><span class="op">(</span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">obs_moda</span><span class="op">)</span>,</span>
<span>         value_tnt <span class="op">=</span> <span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/incidence.html">incidence</a></span><span class="op">(</span><span class="va">obs_tnt</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 45.45455</span></span></code></pre></div>
</div>
</section></section><section class="level2"><h3 id="calcul-de-la-fréquence-et-de-lintensité-dattaque-à-partir-dun-jeu-de-données-dobservations">Calcul de la fréquence et de l’intensité d’attaque à partir d’un jeu de données d’observations<a class="anchor" aria-label="anchor" href="#calcul-de-la-fr%C3%A9quence-et-de-lintensit%C3%A9-dattaque-%C3%A0-partir-dun-jeu-de-donn%C3%A9es-dobservations"></a>
</h3>
<p>La fréquence et l’intensité d’attaque sont calculées par défaut à partir des données brutes avec la fonction <code><a href="../reference/resume_data.html">resume_data()</a></code>. Le paramètre <code>group_cols</code> permet de définir les colonnes qui regroupent les données entre elles. Dans l’exemple ci-dessous, on calcule frequence et intensité d’attaque par <code>plot_id</code> (placette), sur la variable <code>PM_LEAF_PC</code>.</p>
<p>Le résultat est un dataframe, incluant une colonne <code>calculation</code> qui précise le nom des fonctions appliquées sur la variable et une colonne <code>value</code> qui donne les valeurs calculées.</p>
<section class="level3"><h4 id="calcul-par-placette">Calcul par placette<a class="anchor" aria-label="anchor" href="#calcul-par-placette"></a>
</h4>
<div class="cell" data-lable="load_obs">
<div class="sourceCode cell-code" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">F_I_placette</span> <span class="op">&lt;-</span> <span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/resume_data.html">resume_data</a></span><span class="op">(</span><span class="va">data_F1</span>,</span>
<span>                            var_col <span class="op">=</span> <span class="st">"PM_LEAF_PC"</span>, </span>
<span>                            group_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"plot_id"</span>,<span class="st">"xp_trt_code"</span>,<span class="st">"plot_block"</span><span class="op">)</span>,</span>
<span>                            funs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>frequence <span class="op">=</span> <span class="fu">startbox</span><span class="fu">::</span><span class="va"><a href="../reference/incidence.html">incidence</a></span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">F_I_placette</span></span>
<span><span class="co">#&gt;    plot_id xp_trt_code plot_block value  nb          calculation</span></span>
<span><span class="co">#&gt; 1       A1           1          A    64 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 2      A10          10          A    44 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 3       A2           2          A    48 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 4       A3           3          A    49 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 5       A4           4          A    52 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 6       A5           5          A    44 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 7       A6           6          A    47 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 8       A7           7          A   100 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 9       A8           8          A    25 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 10      A9           9          A    64 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 11      B1           1          B    34 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 12     B10          10          B    56 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 13      B2           2          B    59 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 14      B3           3          B    61 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 15      B4           4          B    58 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 16      B5           5          B    94 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 17      B6           6          B    54 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 18      B7           7          B   100 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 19      B8           8          B    36 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 20      B9           9          B    48 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 21      C1           1          C    50 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 22     C10          10          C    81 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 23      C2           2          C    25 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 24      C3           3          C    66 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 25      C4           4          C    67 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 26      C5           5          C    34 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 27      C6           6          C    68 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 28      C7           7          C    63 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 29      C8           8          C    28 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 30      C9           9          C    43 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 31      D1           1          D    65 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 32     D10          10          D    90 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 33      D2           2          D    64 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 34      D3           3          D    46 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 35      D4           4          D    48 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 36      D5           5          D    66 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 37      D6           6          D   100 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 38      D7           7          D    57 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 39      D8           8          D    22 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 40      D9           9          D    23 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 41    TNT1         TNT          A   100 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 42    TNT2         TNT          B   100 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 43    TNT3         TNT          C   100 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 44    TNT4         TNT          D    95 100 frequence PM_LEAF_PC</span></span></code></pre></div>
</div>
<p>Il est possible de passer un tableau résumé en format “wide” avec la fonction <code>resume_pivot_wider</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/resume_pivot_wider.html">resume_pivot_wider</a></span><span class="op">(</span><span class="va">F_I_placette</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   plot_id xp_trt_code plot_block    nb `frequence PM_LEAF_PC`</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;      &lt;int&gt;                  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 A1      1           A            100                     64</span></span>
<span><span class="co">#&gt; 2 A10     10          A            100                     44</span></span>
<span><span class="co">#&gt; 3 A2      2           A            100                     48</span></span>
<span><span class="co">#&gt; 4 A3      3           A            100                     49</span></span>
<span><span class="co">#&gt; 5 A4      4           A            100                     52</span></span>
<span><span class="co">#&gt; 6 A5      5           A            100                     44</span></span></code></pre></div>
</div>
</section><section class="level3"><h4 id="calcul-par-modalité">Calcul par modalité<a class="anchor" aria-label="anchor" href="#calcul-par-modalit%C3%A9"></a>
</h4>
<p>Une fois le calcul fait par placette, il est possible de faire la moyenne par modalité. Il suffit de réappliquer la fonction <code>resume_data</code> sur le tableau précédent en demandant un calcul de moyenne avec la fonction <code>mean</code>, que l’on peut compléter par le calcul de l’écart-type avec la fonction <code>sd</code>.</p>
<p>Ici le calcul est fait uniquement sur la fréquence pour rendre plus lisible l’affichage.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">F_moda</span> <span class="op">&lt;-</span> <span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/resume_data.html">resume_data</a></span><span class="op">(</span><span class="va">F_I_placette</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">calculation</span> <span class="op">==</span> <span class="st">"frequence PM_LEAF_PC"</span><span class="op">)</span>,</span>
<span>                      var_col <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>                      group_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xp_trt_code"</span><span class="op">)</span>,</span>
<span>                      funs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>moyenne <span class="op">=</span> <span class="va">mean</span>, ecart_type <span class="op">=</span> <span class="va">sd</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/resume_pivot_wider.html">resume_pivot_wider</a></span><span class="op">(</span><span class="va">F_moda</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span><span class="co">#&gt;   xp_trt_code    nb `moyenne frequence PM_LEAF_PC` ecart_type frequence PM_LEA…¹</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;       &lt;int&gt;                          &lt;dbl&gt;                         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 1               4                           53.2                         14.5 </span></span>
<span><span class="co">#&gt; 2 10              4                           67.8                         21.4 </span></span>
<span><span class="co">#&gt; 3 2               4                           49                           17.3 </span></span>
<span><span class="co">#&gt; 4 3               4                           55.5                          9.54</span></span>
<span><span class="co">#&gt; 5 4               4                           56.2                          8.26</span></span>
<span><span class="co">#&gt; 6 5               4                           59.5                         26.6 </span></span>
<span><span class="co">#&gt; # ℹ abbreviated name: ¹​`ecart_type frequence PM_LEAF_PC`</span></span></code></pre></div>
</div>
<p>Avec la même logique, il est possible de faire le calcul par bloc.</p>
</section></section><section class="level2"><h3 id="calcul-de-lefficacité">Calcul de l’efficacité<a class="anchor" aria-label="anchor" href="#calcul-de-lefficacit%C3%A9"></a>
</h3>
<div>
<blockquote>
<p><strong>Important</strong></p>
<p>L’efficacité se calcule sur l’intensité d’attaque ou sur la fréquence d’attaque. Il faut donc au préalable avoir réalisé ces calculs en utilisant la fonction resume_data.</p>
</blockquote>
</div>
<p>L’objectif est de calculer l’efficacité du traitement pour chaque placette, à la fois sur la fréquence et l’intensité d’attaque. Pour réaliser le calcul, nous allons donc appliquer la fonction <code>efficacy</code> sur les valeurs de fréquence et d’intensité calculées par placette précédemment avec la fonction <code>resume_data</code>, en regroupant par <code>plot_id</code>.</p>
<section class="level3"><h4 id="efficacité-calculée-à-partir-de-la-moyenne-de-tous-les-tnt">Efficacité calculée à partir de la moyenne de tous les TNT<a class="anchor" aria-label="anchor" href="#efficacit%C3%A9-calcul%C3%A9e-%C3%A0-partir-de-la-moyenne-de-tous-les-tnt"></a>
</h4>
<p>Dans le cas le plus simple, l’efficacité de traitement est calculée pour chaque placette à partir de la moyenne de tous les TNT <a class="footnote-ref" role="doc-noteref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Par défaut, les observations concernant les TNT sont identifés en recherchant la chaîne de charactères “TNT” dans les lignes du tableau.&lt;/p&gt;"><sup>1</sup></a>. Il s’agit du cas par défaut.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eff_par_placette</span> <span class="op">&lt;-</span> <span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/resume_data.html">resume_data</a></span><span class="op">(</span><span class="va">F_I_placette</span>,</span>
<span>            var_col <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>            group_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"plot_id"</span><span class="op">)</span>,</span>
<span>            funs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>efficacite<span class="op">=</span><span class="fu">startbox</span><span class="fu">::</span><span class="va"><a href="../reference/efficacy.html">efficacy</a></span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "4 TNT used for calculation of efficacy"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">eff_par_placette</span><span class="op">)</span></span>
<span><span class="co">#&gt;   plot_id                     calculation mean_tnt    value nb</span></span>
<span><span class="co">#&gt; 1      A1 efficacite frequence PM_LEAF_PC    98.75 35.18987  1</span></span>
<span><span class="co">#&gt; 2     A10 efficacite frequence PM_LEAF_PC    98.75 55.44304  1</span></span>
<span><span class="co">#&gt; 3      A2 efficacite frequence PM_LEAF_PC    98.75 51.39241  1</span></span>
<span><span class="co">#&gt; 4      A3 efficacite frequence PM_LEAF_PC    98.75 50.37975  1</span></span>
<span><span class="co">#&gt; 5      A4 efficacite frequence PM_LEAF_PC    98.75 47.34177  1</span></span>
<span><span class="co">#&gt; 6      A5 efficacite frequence PM_LEAF_PC    98.75 55.44304  1</span></span></code></pre></div>
</div>
</section><section class="level3"><h4 id="efficacité-calculée-à-laide-dune-table-dassociation">Efficacité calculée à l’aide d’une table d’association<a class="anchor" aria-label="anchor" href="#efficacit%C3%A9-calcul%C3%A9e-%C3%A0-laide-dune-table-dassociation"></a>
</h4>
<p>Il est possible d’avoir des situations plus complexes, ou l’efficacité est calculée par rapport au TNT de chaque bloc, ou même selon une table d’association qui associe à chaque placette <code>plot_id</code> le TNT à prendre en référence, identifié dans ce cas par <code>tnt_id</code> (c’est à dire le <code>plot_id</code> pour le TNT).</p>
<section class="level4"><h5 id="génération-dune-table-dassociation">Génération d’une table d’association<a class="anchor" aria-label="anchor" href="#g%C3%A9n%C3%A9ration-dune-table-dassociation"></a>
</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_plot_tnt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>tnt_id<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"TNT"</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,<span class="fl">11</span><span class="op">)</span>,</span>
<span>                          plot_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">F_I_placette</span><span class="op">$</span><span class="va">plot_id</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">df_plot_tnt</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>tnt_id <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">plot_id</span> <span class="op">==</span> <span class="st">"TNT1"</span> <span class="op">~</span> <span class="st">"TNT1"</span>,</span>
<span>    <span class="va">plot_id</span> <span class="op">==</span> <span class="st">"TNT2"</span> <span class="op">~</span> <span class="st">"TNT2"</span>,</span>
<span>    <span class="va">plot_id</span> <span class="op">==</span> <span class="st">"TNT3"</span> <span class="op">~</span> <span class="st">"TNT3"</span>,</span>
<span>    <span class="va">plot_id</span> <span class="op">==</span> <span class="st">"TNT4"</span> <span class="op">~</span> <span class="st">"TNT4"</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">tnt_id</span>,</span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">df_plot_tnt</span></span>
<span></span>
<span><span class="co"># visualisation de la table d'association</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df_plot_tnt</span><span class="op">)</span></span>
<span><span class="co">#&gt;   tnt_id plot_id</span></span>
<span><span class="co">#&gt; 1   TNT1     C10</span></span>
<span><span class="co">#&gt; 2   TNT2      B3</span></span>
<span><span class="co">#&gt; 3   TNT3      D3</span></span>
<span><span class="co">#&gt; 4   TNT4      C6</span></span>
<span><span class="co">#&gt; 5   TNT1      D1</span></span>
<span><span class="co">#&gt; 6   TNT2      B8</span></span></code></pre></div>
</div>
</section><section class="level4"><h5 id="calcul-de-lefficacité-avec-la-table-dassociation">Calcul de l’efficacité avec la table d’association<a class="anchor" aria-label="anchor" href="#calcul-de-lefficacit%C3%A9-avec-la-table-dassociation"></a>
</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calcul de l'efficacité en tenant compte de l'association de chaque placette avec son TNT</span></span>
<span><span class="va">eff_placette_tnt</span> <span class="op">&lt;-</span> <span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/resume_data.html">resume_data</a></span><span class="op">(</span><span class="va">F_I_placette</span>,</span>
<span>            var_col <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>            group_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"plot_id"</span><span class="op">)</span>,</span>
<span>            funs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>efficacite<span class="op">=</span><span class="fu">startbox</span><span class="fu">::</span><span class="va"><a href="../reference/efficacy.html">efficacy</a></span><span class="op">)</span>,</span>
<span>            df_tnt <span class="op">=</span> <span class="va">df_plot_tnt</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1 TNT used for calculation of efficacy"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">eff_placette_tnt</span><span class="op">)</span></span>
<span><span class="co">#&gt;   plot_id                     calculation mean_tnt    value nb</span></span>
<span><span class="co">#&gt; 1      A1 efficacite frequence PM_LEAF_PC      100 36.00000  1</span></span>
<span><span class="co">#&gt; 2     A10 efficacite frequence PM_LEAF_PC      100 56.00000  1</span></span>
<span><span class="co">#&gt; 3      A2 efficacite frequence PM_LEAF_PC      100 52.00000  1</span></span>
<span><span class="co">#&gt; 4      A3 efficacite frequence PM_LEAF_PC       95 48.42105  1</span></span>
<span><span class="co">#&gt; 5      A4 efficacite frequence PM_LEAF_PC      100 48.00000  1</span></span>
<span><span class="co">#&gt; 6      A5 efficacite frequence PM_LEAF_PC       95 53.68421  1</span></span></code></pre></div>
</div>
</section></section></section></section><section class="section level2"><h2 id="réaliser-lanalyse-statistique">Réaliser l’analyse statistique<a class="anchor" aria-label="anchor" href="#r%C3%A9aliser-lanalyse-statistique"></a>
</h2>
<p>Le package <code>{startbox}</code> propose des fonctions pour appliquer automatiquement des tests statistiques (ANOVA, Kruskal-Wallis) sur les variables observées.</p>
<p>La fonction <code><a href="../reference/test_stats.html">test_stats()</a></code> permet de comparer les modalités de traitement en fonction de la variable d’intérêt. Elle retourne le test utilisé, la p_valeur du test et les groupes des modalites dans le dataframe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## tableau bilan sur la fréquence</span></span>
<span><span class="va">F_plot</span> <span class="op">&lt;-</span> <span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/resume_data.html">resume_data</a></span><span class="op">(</span><span class="va">data_F1</span>,</span>
<span>                            var_col <span class="op">=</span> <span class="st">"PM_LEAF_PC"</span>, </span>
<span>                            group_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"plot_id"</span>,<span class="st">"xp_trt_code"</span>,<span class="st">"plot_block"</span><span class="op">)</span>,</span>
<span>                            funs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>frequence <span class="op">=</span> <span class="fu">startbox</span><span class="fu">::</span><span class="va"><a href="../reference/incidence.html">incidence</a></span>, intensité <span class="op">=</span> <span class="fu">startbox</span><span class="fu">::</span><span class="va"><a href="../reference/intensity.html">intensity</a></span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/test_stats.html">test_stats</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">F_plot</span>, value_col <span class="op">=</span> <span class="st">"value"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [frequence PM_LEAF_PC] Shapiro p =0.449 | Bartlett p =0.07</span></span>
<span><span class="co">#&gt; [intensité PM_LEAF_PC] Shapiro p =0.034 | Bartlett p =0.001</span></span>
<span><span class="co">#&gt;    modality mean_frequence groups_frequence mean_intensité groups_intensité</span></span>
<span><span class="co">#&gt; 11      TNT          98.75                a         3.5750                a</span></span>
<span><span class="co">#&gt; 8         7          80.00               ab         2.8400               ab</span></span>
<span><span class="co">#&gt; 2        10          67.75               bc         1.9875              abc</span></span>
<span><span class="co">#&gt; 7         6          67.25               bc         2.1000              abc</span></span>
<span><span class="co">#&gt; 1         1          53.25               bc         1.3175              bcd</span></span>
<span><span class="co">#&gt; 4         3          55.50               bc         1.2025              bcd</span></span>
<span><span class="co">#&gt; 5         4          56.25               bc         1.3350              bcd</span></span>
<span><span class="co">#&gt; 6         5          59.50               bc         1.6400              bcd</span></span>
<span><span class="co">#&gt; 3         2          49.00               bc         1.0825              cde</span></span>
<span><span class="co">#&gt; 10        9          44.50               bc         0.8725               de</span></span>
<span><span class="co">#&gt; 9         8          27.75                c         0.5600                e</span></span></code></pre></div>
</div>
</section><section class="section level2"><h2 id="réaliser-les-graphiques">Réaliser les graphiques<a class="anchor" aria-label="anchor" href="#r%C3%A9aliser-les-graphiques"></a>
</h2>
<p>Les données résumées ou les résultats statistiques peuvent être visualisés sous forme de barplots ou de heatmaps pour une meilleure lecture des différences entre modalités.</p>
<p>Pour la réalisation de la heatmap il est nécessaire d’utiliser la fonction merge_data_metadata car il faut joindre toutes les données du fichiers (metadata et feuille “data_”). Pour les autres graphiques c’est aussi intéressant pour obtenir des informations plus précises sur les modalités par exemple.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">df_complet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">F_plot</span>, <span class="va">mydata2</span><span class="op">$</span><span class="va">metadata</span><span class="op">$</span><span class="va">moda_desc</span>, all.x<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">df_complet</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">df_complet</span>, <span class="va">mydata2</span><span class="op">$</span><span class="va">metadata</span><span class="op">$</span><span class="va">plot_desc</span>, all.x<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">df_complet</span></span>
<span><span class="co">#&gt;    xp_trt_code plot_id plot_block  value  nb          calculation</span></span>
<span><span class="co">#&gt; 1            1      A1          A  64.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 2            1      A1          A   1.73 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 3            1      B1          B   0.64 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 4            1      B1          B  34.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 5            1      C1          C  50.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 6            1      C1          C   1.44 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 7            1      D1          D  65.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 8            1      D1          D   1.46 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 9           10     A10          A  44.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 10          10     A10          A   1.04 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 11          10     B10          B   0.99 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 12          10     B10          B  56.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 13          10     C10          C  81.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 14          10     C10          C   3.05 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 15          10     D10          D  90.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 16          10     D10          D   2.87 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 17           2      A2          A   0.91 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 18           2      A2          A  48.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 19           2      B2          B   1.46 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 20           2      B2          B  59.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 21           2      C2          C   0.45 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 22           2      C2          C  25.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 23           2      D2          D   1.51 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 24           2      D2          D  64.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 25           3      A3          A  49.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 26           3      A3          A   1.00 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 27           3      B3          B  61.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 28           3      B3          B   1.24 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 29           3      C3          C   1.65 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 30           3      C3          C  66.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 31           3      D3          D  46.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 32           3      D3          D   0.92 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 33           4      A4          A  52.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 34           4      A4          A   1.23 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 35           4      B4          B  58.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 36           4      B4          B   1.57 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 37           4      C4          C   1.47 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 38           4      C4          C  67.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 39           4      D4          D  48.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 40           4      D4          D   1.07 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 41           5      A5          A  44.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 42           5      A5          A   0.84 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 43           5      B5          B  94.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 44           5      B5          B   3.33 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 45           5      C5          C  34.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 46           5      C5          C   0.62 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 47           5      D5          D   1.77 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 48           5      D5          D  66.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 49           6      A6          A  47.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 50           6      A6          A   0.94 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 51           6      B6          B  54.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 52           6      B6          B   1.43 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 53           6      C6          C  68.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 54           6      C6          C   1.93 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 55           6      D6          D   4.10 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 56           6      D6          D 100.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 57           7      A7          A   3.29 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 58           7      A7          A 100.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 59           7      B7          B 100.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 60           7      B7          B   5.45 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 61           7      C7          C  63.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 62           7      C7          C   1.47 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 63           7      D7          D   1.15 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 64           7      D7          D  57.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 65           8      A8          A  25.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 66           8      A8          A   0.44 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 67           8      B8          B  36.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 68           8      B8          B   0.76 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 69           8      C8          C  28.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 70           8      C8          C   0.52 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 71           8      D8          D   0.52 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 72           8      D8          D  22.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 73           9      A9          A   1.38 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 74           9      A9          A  64.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 75           9      B9          B  48.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 76           9      B9          B   0.81 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 77           9      C9          C  43.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 78           9      C9          C   0.84 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 79           9      D9          D  23.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 80           9      D9          D   0.46 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 81         TNT    TNT1          A   4.76 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 82         TNT    TNT1          A 100.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 83         TNT    TNT2          B 100.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 84         TNT    TNT2          B   2.82 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 85         TNT    TNT3          C   3.46 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 86         TNT    TNT3          C 100.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 87         TNT    TNT4          D   3.26 100 intensité PM_LEAF_PC</span></span>
<span><span class="co">#&gt; 88         TNT    TNT4          D  95.00 100 frequence PM_LEAF_PC</span></span>
<span><span class="co">#&gt;           xp_trt_name                      xp_trt_desc plot_x plot_y plot_n</span></span>
<span><span class="co">#&gt; 1       Cuivre tardif cuivre 2 semains après symptômes      2      1      7</span></span>
<span><span class="co">#&gt; 2       Cuivre tardif cuivre 2 semains après symptômes      2      1      7</span></span>
<span><span class="co">#&gt; 3       Cuivre tardif cuivre 2 semains après symptômes      2     22      7</span></span>
<span><span class="co">#&gt; 4       Cuivre tardif cuivre 2 semains après symptômes      2     22      7</span></span>
<span><span class="co">#&gt; 5       Cuivre tardif cuivre 2 semains après symptômes      1     11      7</span></span>
<span><span class="co">#&gt; 6       Cuivre tardif cuivre 2 semains après symptômes      1     11      7</span></span>
<span><span class="co">#&gt; 7       Cuivre tardif cuivre 2 semains après symptômes      1     16      7</span></span>
<span><span class="co">#&gt; 8       Cuivre tardif cuivre 2 semains après symptômes      1     16      7</span></span>
<span><span class="co">#&gt; 9  Tanins chataignier                             &lt;NA&gt;      2     10      7</span></span>
<span><span class="co">#&gt; 10 Tanins chataignier                             &lt;NA&gt;      2     10      7</span></span>
<span><span class="co">#&gt; 11 Tanins chataignier                             &lt;NA&gt;      2     21      7</span></span>
<span><span class="co">#&gt; 12 Tanins chataignier                             &lt;NA&gt;      2     21      7</span></span>
<span><span class="co">#&gt; 13 Tanins chataignier                             &lt;NA&gt;      1      6      7</span></span>
<span><span class="co">#&gt; 14 Tanins chataignier                             &lt;NA&gt;      1      6      7</span></span>
<span><span class="co">#&gt; 15 Tanins chataignier                             &lt;NA&gt;      1     15      6</span></span>
<span><span class="co">#&gt; 16 Tanins chataignier                             &lt;NA&gt;      1     15      6</span></span>
<span><span class="co">#&gt; 17            Cuivre      cuivre à partir de symptômes      2      6      7</span></span>
<span><span class="co">#&gt; 18            Cuivre      cuivre à partir de symptômes      2      6      7</span></span>
<span><span class="co">#&gt; 19            Cuivre      cuivre à partir de symptômes      2     18      7</span></span>
<span><span class="co">#&gt; 20            Cuivre      cuivre à partir de symptômes      2     18      7</span></span>
<span><span class="co">#&gt; 21            Cuivre      cuivre à partir de symptômes      1      1      7</span></span>
<span><span class="co">#&gt; 22            Cuivre      cuivre à partir de symptômes      1      1      7</span></span>
<span><span class="co">#&gt; 23            Cuivre      cuivre à partir de symptômes      1     12      7</span></span>
<span><span class="co">#&gt; 24            Cuivre      cuivre à partir de symptômes      1     12      7</span></span>
<span><span class="co">#&gt; 25     Cuivre précoce                             &lt;NA&gt;      2      4      6</span></span>
<span><span class="co">#&gt; 26     Cuivre précoce                             &lt;NA&gt;      2      4      6</span></span>
<span><span class="co">#&gt; 27     Cuivre précoce                             &lt;NA&gt;      2     16      7</span></span>
<span><span class="co">#&gt; 28     Cuivre précoce                             &lt;NA&gt;      2     16      7</span></span>
<span><span class="co">#&gt; 29     Cuivre précoce                             &lt;NA&gt;      1     10      7</span></span>
<span><span class="co">#&gt; 30     Cuivre précoce                             &lt;NA&gt;      1     10      7</span></span>
<span><span class="co">#&gt; 31     Cuivre précoce                             &lt;NA&gt;      1     20      7</span></span>
<span><span class="co">#&gt; 32     Cuivre précoce                             &lt;NA&gt;      1     20      7</span></span>
<span><span class="co">#&gt; 33              Roméo                             &lt;NA&gt;      2     11      7</span></span>
<span><span class="co">#&gt; 34              Roméo                             &lt;NA&gt;      2     11      7</span></span>
<span><span class="co">#&gt; 35              Roméo                             &lt;NA&gt;      2     17      7</span></span>
<span><span class="co">#&gt; 36              Roméo                             &lt;NA&gt;      2     17      7</span></span>
<span><span class="co">#&gt; 37              Roméo                             &lt;NA&gt;      1      7      7</span></span>
<span><span class="co">#&gt; 38              Roméo                             &lt;NA&gt;      1      7      7</span></span>
<span><span class="co">#&gt; 39              Roméo                             &lt;NA&gt;      1     21      7</span></span>
<span><span class="co">#&gt; 40              Roméo                             &lt;NA&gt;      1     21      7</span></span>
<span><span class="co">#&gt; 41           Limocide                             &lt;NA&gt;      2      8      6</span></span>
<span><span class="co">#&gt; 42           Limocide                             &lt;NA&gt;      2      8      6</span></span>
<span><span class="co">#&gt; 43           Limocide                             &lt;NA&gt;      2     12      7</span></span>
<span><span class="co">#&gt; 44           Limocide                             &lt;NA&gt;      2     12      7</span></span>
<span><span class="co">#&gt; 45           Limocide                             &lt;NA&gt;      1      3      7</span></span>
<span><span class="co">#&gt; 46           Limocide                             &lt;NA&gt;      1      3      7</span></span>
<span><span class="co">#&gt; 47           Limocide                             &lt;NA&gt;      1     19      7</span></span>
<span><span class="co">#&gt; 48           Limocide                             &lt;NA&gt;      1     19      7</span></span>
<span><span class="co">#&gt; 49            Belvine                             &lt;NA&gt;      2      3      7</span></span>
<span><span class="co">#&gt; 50            Belvine                             &lt;NA&gt;      2      3      7</span></span>
<span><span class="co">#&gt; 51            Belvine                             &lt;NA&gt;      2     20      7</span></span>
<span><span class="co">#&gt; 52            Belvine                             &lt;NA&gt;      2     20      7</span></span>
<span><span class="co">#&gt; 53            Belvine                             &lt;NA&gt;      1      9      7</span></span>
<span><span class="co">#&gt; 54            Belvine                             &lt;NA&gt;      1      9      7</span></span>
<span><span class="co">#&gt; 55            Belvine                             &lt;NA&gt;      1     14      6</span></span>
<span><span class="co">#&gt; 56            Belvine                             &lt;NA&gt;      1     14      6</span></span>
<span><span class="co">#&gt; 57    Salix/Equisetum                             &lt;NA&gt;      2      9      6</span></span>
<span><span class="co">#&gt; 58    Salix/Equisetum                             &lt;NA&gt;      2      9      6</span></span>
<span><span class="co">#&gt; 59    Salix/Equisetum                             &lt;NA&gt;      2     15      7</span></span>
<span><span class="co">#&gt; 60    Salix/Equisetum                             &lt;NA&gt;      2     15      7</span></span>
<span><span class="co">#&gt; 61    Salix/Equisetum                             &lt;NA&gt;      1      5      6</span></span>
<span><span class="co">#&gt; 62    Salix/Equisetum                             &lt;NA&gt;      1      5      6</span></span>
<span><span class="co">#&gt; 63    Salix/Equisetum                             &lt;NA&gt;      1     22      7</span></span>
<span><span class="co">#&gt; 64    Salix/Equisetum                             &lt;NA&gt;      1     22      7</span></span>
<span><span class="co">#&gt; 65             Esseva                             &lt;NA&gt;      2      2      6</span></span>
<span><span class="co">#&gt; 66             Esseva                             &lt;NA&gt;      2      2      6</span></span>
<span><span class="co">#&gt; 67             Esseva                             &lt;NA&gt;      2     13      6</span></span>
<span><span class="co">#&gt; 68             Esseva                             &lt;NA&gt;      2     13      6</span></span>
<span><span class="co">#&gt; 69             Esseva                             &lt;NA&gt;      1      8      7</span></span>
<span><span class="co">#&gt; 70             Esseva                             &lt;NA&gt;      1      8      7</span></span>
<span><span class="co">#&gt; 71             Esseva                             &lt;NA&gt;      1     17      7</span></span>
<span><span class="co">#&gt; 72             Esseva                             &lt;NA&gt;      1     17      7</span></span>
<span><span class="co">#&gt; 73            Mimetic                             &lt;NA&gt;      2      7      7</span></span>
<span><span class="co">#&gt; 74            Mimetic                             &lt;NA&gt;      2      7      7</span></span>
<span><span class="co">#&gt; 75            Mimetic                             &lt;NA&gt;      2     14      6</span></span>
<span><span class="co">#&gt; 76            Mimetic                             &lt;NA&gt;      2     14      6</span></span>
<span><span class="co">#&gt; 77            Mimetic                             &lt;NA&gt;      1      4      7</span></span>
<span><span class="co">#&gt; 78            Mimetic                             &lt;NA&gt;      1      4      7</span></span>
<span><span class="co">#&gt; 79            Mimetic                             &lt;NA&gt;      1     18      7</span></span>
<span><span class="co">#&gt; 80            Mimetic                             &lt;NA&gt;      1     18      7</span></span>
<span><span class="co">#&gt; 81  Témoin non traité                             &lt;NA&gt;      2      5      5</span></span>
<span><span class="co">#&gt; 82  Témoin non traité                             &lt;NA&gt;      2      5      5</span></span>
<span><span class="co">#&gt; 83  Témoin non traité                             &lt;NA&gt;      2     19      7</span></span>
<span><span class="co">#&gt; 84  Témoin non traité                             &lt;NA&gt;      2     19      7</span></span>
<span><span class="co">#&gt; 85  Témoin non traité                             &lt;NA&gt;      1      2      7</span></span>
<span><span class="co">#&gt; 86  Témoin non traité                             &lt;NA&gt;      1      2      7</span></span>
<span><span class="co">#&gt; 87  Témoin non traité                             &lt;NA&gt;      1     13      5</span></span>
<span><span class="co">#&gt; 88  Témoin non traité                             &lt;NA&gt;      1     13      5</span></span>
<span><span class="co">#&gt;    plot_desc</span></span>
<span><span class="co">#&gt; 1         NA</span></span>
<span><span class="co">#&gt; 2         NA</span></span>
<span><span class="co">#&gt; 3         NA</span></span>
<span><span class="co">#&gt; 4         NA</span></span>
<span><span class="co">#&gt; 5         NA</span></span>
<span><span class="co">#&gt; 6         NA</span></span>
<span><span class="co">#&gt; 7         NA</span></span>
<span><span class="co">#&gt; 8         NA</span></span>
<span><span class="co">#&gt; 9         NA</span></span>
<span><span class="co">#&gt; 10        NA</span></span>
<span><span class="co">#&gt; 11        NA</span></span>
<span><span class="co">#&gt; 12        NA</span></span>
<span><span class="co">#&gt; 13        NA</span></span>
<span><span class="co">#&gt; 14        NA</span></span>
<span><span class="co">#&gt; 15        NA</span></span>
<span><span class="co">#&gt; 16        NA</span></span>
<span><span class="co">#&gt; 17        NA</span></span>
<span><span class="co">#&gt; 18        NA</span></span>
<span><span class="co">#&gt; 19        NA</span></span>
<span><span class="co">#&gt; 20        NA</span></span>
<span><span class="co">#&gt; 21        NA</span></span>
<span><span class="co">#&gt; 22        NA</span></span>
<span><span class="co">#&gt; 23        NA</span></span>
<span><span class="co">#&gt; 24        NA</span></span>
<span><span class="co">#&gt; 25        NA</span></span>
<span><span class="co">#&gt; 26        NA</span></span>
<span><span class="co">#&gt; 27        NA</span></span>
<span><span class="co">#&gt; 28        NA</span></span>
<span><span class="co">#&gt; 29        NA</span></span>
<span><span class="co">#&gt; 30        NA</span></span>
<span><span class="co">#&gt; 31        NA</span></span>
<span><span class="co">#&gt; 32        NA</span></span>
<span><span class="co">#&gt; 33        NA</span></span>
<span><span class="co">#&gt; 34        NA</span></span>
<span><span class="co">#&gt; 35        NA</span></span>
<span><span class="co">#&gt; 36        NA</span></span>
<span><span class="co">#&gt; 37        NA</span></span>
<span><span class="co">#&gt; 38        NA</span></span>
<span><span class="co">#&gt; 39        NA</span></span>
<span><span class="co">#&gt; 40        NA</span></span>
<span><span class="co">#&gt; 41        NA</span></span>
<span><span class="co">#&gt; 42        NA</span></span>
<span><span class="co">#&gt; 43        NA</span></span>
<span><span class="co">#&gt; 44        NA</span></span>
<span><span class="co">#&gt; 45        NA</span></span>
<span><span class="co">#&gt; 46        NA</span></span>
<span><span class="co">#&gt; 47        NA</span></span>
<span><span class="co">#&gt; 48        NA</span></span>
<span><span class="co">#&gt; 49        NA</span></span>
<span><span class="co">#&gt; 50        NA</span></span>
<span><span class="co">#&gt; 51        NA</span></span>
<span><span class="co">#&gt; 52        NA</span></span>
<span><span class="co">#&gt; 53        NA</span></span>
<span><span class="co">#&gt; 54        NA</span></span>
<span><span class="co">#&gt; 55        NA</span></span>
<span><span class="co">#&gt; 56        NA</span></span>
<span><span class="co">#&gt; 57        NA</span></span>
<span><span class="co">#&gt; 58        NA</span></span>
<span><span class="co">#&gt; 59        NA</span></span>
<span><span class="co">#&gt; 60        NA</span></span>
<span><span class="co">#&gt; 61        NA</span></span>
<span><span class="co">#&gt; 62        NA</span></span>
<span><span class="co">#&gt; 63        NA</span></span>
<span><span class="co">#&gt; 64        NA</span></span>
<span><span class="co">#&gt; 65        NA</span></span>
<span><span class="co">#&gt; 66        NA</span></span>
<span><span class="co">#&gt; 67        NA</span></span>
<span><span class="co">#&gt; 68        NA</span></span>
<span><span class="co">#&gt; 69        NA</span></span>
<span><span class="co">#&gt; 70        NA</span></span>
<span><span class="co">#&gt; 71        NA</span></span>
<span><span class="co">#&gt; 72        NA</span></span>
<span><span class="co">#&gt; 73        NA</span></span>
<span><span class="co">#&gt; 74        NA</span></span>
<span><span class="co">#&gt; 75        NA</span></span>
<span><span class="co">#&gt; 76        NA</span></span>
<span><span class="co">#&gt; 77        NA</span></span>
<span><span class="co">#&gt; 78        NA</span></span>
<span><span class="co">#&gt; 79        NA</span></span>
<span><span class="co">#&gt; 80        NA</span></span>
<span><span class="co">#&gt; 81        NA</span></span>
<span><span class="co">#&gt; 82        NA</span></span>
<span><span class="co">#&gt; 83        NA</span></span>
<span><span class="co">#&gt; 84        NA</span></span>
<span><span class="co">#&gt; 85        NA</span></span>
<span><span class="co">#&gt; 86        NA</span></span>
<span><span class="co">#&gt; 87        NA</span></span>
<span><span class="co">#&gt; 88        NA</span></span></code></pre></div>
</div>
<section class="level2"><h3 id="barplot">Barplot<a class="anchor" aria-label="anchor" href="#barplot"></a>
</h3>
<p>La fonction plot_xpbar permet de réaliser un graphique classique, dit “en batons”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/plot_xpbar.html">plot_xpbar</a></span><span class="op">(</span><span class="va">df_complet</span>,xcol<span class="op">=</span><span class="st">"xp_trt_code"</span>,ycol<span class="op">=</span><span class="st">"value"</span>,fillcol<span class="op">=</span><span class="st">"calculation"</span>,show_errorbar <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: The dot-dot notation (`..y..`) was deprecated in ggplot2 3.4.0.</span></span>
<span><span class="co">#&gt; ℹ Please use `after_stat(y)` instead.</span></span>
<span><span class="co">#&gt; ℹ The deprecated feature was likely used in the startbox package.</span></span>
<span><span class="co">#&gt;   Please report the issue to the authors.</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="startbox_files/figure-html/unnamed-chunk-20-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section class="level2"><h3 id="heatmap">Heatmap<a class="anchor" aria-label="anchor" href="#heatmap"></a>
</h3>
<p>La fonction <code>plot_xpheat</code> permet de visualiser l’intensité ou la fréquence d’attaque directement sur une carte thermique, en représentant les valeurs par placette sous forme de couleurs. Cela facilite l’identification des zones les plus touchées ou les effets spatiaux éventuels dans la parcelle.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/plot_xpheat.html">plot_xpheat</a></span><span class="op">(</span><span class="va">df_complet</span>, variable <span class="op">=</span> <span class="st">"value"</span>, caption <span class="op">=</span> <span class="st">"IFV"</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="startbox_files/figure-html/unnamed-chunk-21-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section class="level2"><h3 id="boxplot">Boxplot<a class="anchor" aria-label="anchor" href="#boxplot"></a>
</h3>
<p>La fonction plot_xpbox() permet de visualiser la répartition des valeurs observées pour chaque modalité sous forme de boîtes à moustaches. Ce type de graphique est particulièrement utile pour : - évaluer la dispersion des observations, - identifier les valeurs extrêmes ou atypiques, - comparer visuellement les distributions entre modalités.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">startbox</span><span class="fu">::</span><span class="fu"><a href="../reference/plot_xpbox.html">plot_xpbox</a></span><span class="op">(</span><span class="va">df_complet</span>, calculation_type <span class="op">=</span> <span class="st">"frequence"</span>, show_dots <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output-display">
<div>
<figure><p><img src="startbox_files/figure-html/unnamed-chunk-22-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</section></section><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button,
        { trigger: "manual",
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'light-border',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config);
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script></main><aside class="col-md-3"><nav id="toc" aria-label="Table des matières"><h2>Sur cette page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Développé par Xavier Delpuech, Hervé Maire, Anne-Sophie Chazalmartin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site créé avec <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
