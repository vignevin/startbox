<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="fr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare data — prepare_data • startbox</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare data — prepare_data"><meta name="description" content='This function prepares a dataframe for analysis. It summarizes the data in a dataframe according to user-defined groups and functions (mean, frequency, intensity, etc.).
For instance, it allows you to calculate the intensity and frequency of disease attack per plot.
If the user wants to use the raw data, a "raw" parameter allows you to keep all the data from the initial dataframe.
The data is enriched by default with descriptions of the plots and treatments.'><meta property="og:description" content='This function prepares a dataframe for analysis. It summarizes the data in a dataframe according to user-defined groups and functions (mean, frequency, intensity, etc.).
For instance, it allows you to calculate the intensity and frequency of disease attack per plot.
If the user wants to use the raw data, a "raw" parameter allows you to keep all the data from the initial dataframe.
The data is enriched by default with descriptions of the plots and treatments.'><meta property="og:image" content="https://vignevin.github.io/startbox/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Passer au contenu</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Navigation sur le site"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">startbox</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Activer la navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Référence</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/model_excel.html">Modèle Excel</a></li>
    <li><a class="dropdown-item" href="../articles/pom.html">Importation des données météo POM</a></li>
    <li><a class="dropdown-item" href="../articles/quickstart.html">quickstart</a></li>
    <li><a class="dropdown-item" href="../articles/topvigne.html">topvigne</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/vignevin/startbox"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prepare data</h1>
      <small class="dont-index">Source : <a href="https://github.com/vignevin/startbox/blob/HEAD/R/data_preparation.R" class="external-link"><code>R/data_preparation.R</code></a></small>
      <div class="d-none name"><code>prepare_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function prepares a dataframe for analysis. It summarizes the data in a dataframe according to user-defined groups and functions (mean, frequency, intensity, etc.).
For instance, it allows you to calculate the intensity and frequency of disease attack per plot.
If the user wants to use the raw data, a "raw" parameter allows you to keep all the data from the initial dataframe.
The data is enriched by default with descriptions of the plots and treatments.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Utilisation<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare_data</span><span class="op">(</span></span>
<span>  <span class="va">self</span>,</span>
<span>  <span class="va">df</span>,</span>
<span>  var_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group_cols <span class="op">=</span> <span class="st">"plot_id"</span>,</span>
<span>  funs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>intensite <span class="op">=</span> <span class="va">intensity</span>, frequence <span class="op">=</span> <span class="va">incidence</span><span class="op">)</span>,</span>
<span>  filters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  code_tnt <span class="op">=</span> <span class="st">"TNT"</span>,</span>
<span>  raw <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  tnt_mode <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  add_plot_desc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  flex <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_trt_desc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  prep_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prep_desc <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-self">self<a class="anchor" aria-label="anchor" href="#arg-self"></a></dt>
<dd><p>an instance of the <code>UserData</code> R6 class containing observation data.</p></dd>


<dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>the name of observation dataframe to prepare</p></dd>


<dt id="arg-var-cols">var_cols<a class="anchor" aria-label="anchor" href="#arg-var-cols"></a></dt>
<dd><p>character, colname(s) of the variable to use in data</p></dd>


<dt id="arg-group-cols">group_cols<a class="anchor" aria-label="anchor" href="#arg-group-cols"></a></dt>
<dd><p>colnames for grouping</p></dd>


<dt id="arg-funs">funs<a class="anchor" aria-label="anchor" href="#arg-funs"></a></dt>
<dd><p>vector of statistics to be applied, by default c("intensity","incidence")</p></dd>


<dt id="arg-filters">filters<a class="anchor" aria-label="anchor" href="#arg-filters"></a></dt>
<dd><p>a list of filters to apply. for instance : list(xp_trt_name = c("TNT","MOD1"), block_code = "A") will keep only block_code = A and xp_trt_name = TNT or MOD1.</p></dd>


<dt id="arg-code-tnt">code_tnt<a class="anchor" aria-label="anchor" href="#arg-code-tnt"></a></dt>
<dd><p>for efficacy only : a string to identify in TNT in the row of the dataframe by default "TNT"</p></dd>


<dt id="arg-raw">raw<a class="anchor" aria-label="anchor" href="#arg-raw"></a></dt>
<dd><p>boolean, if TRUE the dataframe returned contains all values without summarize, that means funs is ignored</p></dd>


<dt id="arg-tnt-mode">tnt_mode<a class="anchor" aria-label="anchor" href="#arg-tnt-mode"></a></dt>
<dd><p>(for efficacy calculation only) : mode of association of plot and tnt. a character value among "block","nearest","all","user". by default set to "all".</p></dd>


<dt id="arg-add-plot-desc">add_plot_desc<a class="anchor" aria-label="anchor" href="#arg-add-plot-desc"></a></dt>
<dd><p>boolean. if TRUE, the dataframe is merged with plot description found in the sheet "placette"</p></dd>


<dt id="arg-flex">flex<a class="anchor" aria-label="anchor" href="#arg-flex"></a></dt>
<dd><p>boolean. if TRUE, 10A A1O or 10a are considered as the same plot_id. if NULL, flex is automatically adjusted when a difference in plot_id is detected</p></dd>


<dt id="arg-add-trt-desc">add_trt_desc<a class="anchor" aria-label="anchor" href="#arg-add-trt-desc"></a></dt>
<dd><p>boolean. if TRUE, the dataframe is merged with experimental treatment description found in the sheet "modalite"</p></dd>


<dt id="arg-prep-name">prep_name<a class="anchor" aria-label="anchor" href="#arg-prep-name"></a></dt>
<dd><p>name of the prepared dataset</p></dd>


<dt id="arg-prep-desc">prep_desc<a class="anchor" aria-label="anchor" href="#arg-prep-desc"></a></dt>
<dd><p>short description of the prepared dataset</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="valeur-de-retour">Valeur de retour<a class="anchor" aria-label="anchor" href="#valeur-de-retour"></a></h2>
    <p>a dataframe with group_cols and including a 'calculation' column which specifies the name of the functions applied to the variable and a 'value' column which gives the calculated values.</p>
    </div>
    <div class="section level2">
    <h2 id="d-tails">Détails<a class="anchor" aria-label="anchor" href="#d-tails"></a></h2>
    <p>For efficacy calculation, tnt_mode could be one among :</p><ul><li><p>"all" : efficacy is calculated with the mean value of all TNT</p></li>
<li><p>"block" : efficacy is calculated with the mean value of TNT per block</p></li>
<li><p>"nearest" : efficacy is calculated with the nearest TNT to the plot</p></li>
<li><p>"user" : efficacy is calculated with an association table between TNT and plot provided by the user (to import in (data_user)$plot_tnt_association$user_association)</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table des matières"><h2>Sur cette page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Développé par Xavier Delpuech, Hervé Maire, Anne-Sophie Chazalmartin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site créé avec <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

