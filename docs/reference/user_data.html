<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="fr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>User Data R6 Class — user_data • startbox</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="User Data R6 Class — user_data"><meta name="description" content="This R6 class is designed to manage experimental data, including observation sheets, metadata,
and traceability logs. It provides methods to import, merge, and export data from Excel files
while tracking operations for reproducibility."><meta property="og:description" content="This R6 class is designed to manage experimental data, including observation sheets, metadata,
and traceability logs. It provides methods to import, merge, and export data from Excel files
while tracking operations for reproducibility."><meta property="og:image" content="https://vignevin.github.io/startbox/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Passer au contenu</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Navigation sur le site"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">startbox</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Activer la navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Référence</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/quickstart.html">quickstart</a></li>
    <li><a class="dropdown-item" href="../articles/topvigne.html">topvigne</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/vignevin/startbox"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>User Data R6 Class</h1>
      <small class="dont-index">Source : <a href="https://github.com/vignevin/startbox/blob/HEAD/R/class_user_data.R" class="external-link"><code>R/class_user_data.R</code></a></small>
      <div class="d-none name"><code>user_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This R6 class is designed to manage experimental data, including observation sheets, metadata,
and traceability logs. It provides methods to import, merge, and export data from Excel files
while tracking operations for reproducibility.</p>
    </div>


    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>name</code></dt>
<dd><p>name of the user_data object, by default "user_data".</p></dd>


<dt><code>excel_data_trial</code></dt>
<dd><p>Path to the current Excel file used for import/export operations.</p></dd>


<dt><code>obs_data</code></dt>
<dd><p>A named list of data.frames, each corresponding to a sheet or file containing observation data.</p></dd>


<dt><code>metadata</code></dt>
<dd><p>A list storing metadata tables, such as "placette" and "modalite".</p></dd>


<dt><code>plot_tnt_association</code></dt>
<dd><p>A list storing association tables between plot and TNT.</p></dd>


<dt><code>prepared_data</code></dt>
<dd><p>A list storing prepared_data tables ready for stats analysis as produced by the function prepare_data()</p></dd>


<dt><code>stats</code></dt>
<dd><p>A list storing stats results as results of the function stats_tests()</p></dd>


<dt><code>traceability</code></dt>
<dd><p>A data.frame storing a log of all operations performed on the data (import, export, update, etc.).</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-UserData-new"><code>user_data$new()</code></a></p></li>
<li><p><a href="#method-UserData-add_metadata"><code>user_data$add_metadata()</code></a></p></li>
<li><p><a href="#method-UserData-add_obs"><code>user_data$add_obs()</code></a></p></li>
<li><p><a href="#method-UserData-show_obs_data"><code>user_data$show_obs_data()</code></a></p></li>
<li><p><a href="#method-UserData-log_trace"><code>user_data$log_trace()</code></a></p></li>
<li><p><a href="#method-UserData-clone"><code>user_data$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-UserData-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Initializes a new <code>user_data</code> object. If no Excel file is provided, a default template is used.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/user_data.html">user_data</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>trial_file <span class="op">=</span> <span class="cn">NULL</span>, name <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>trial_file</code></dt>
<dd><p>Optional. Path to the Excel file to load. If NULL, a default template is used.</p></dd>


<dt><code>name</code></dt>
<dd><p>optional. A string to name the new <code>user_data</code> object</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>A new instance of the <code>UserData</code> class.</p>
</div>

</div><p></p><hr><a id="method-UserData-add_metadata"></a><div class="section">
<h3 id="method-add-metadata-">Method <code>add_metadata()</code><a class="anchor" aria-label="anchor" href="#method-add-metadata-"></a></h3>
<p>Adds or updates a metadata element in the <code>metadata</code> slot.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">user_data</span><span class="op">$</span><span class="fu">add_metadata</span><span class="op">(</span><span class="va">name</span>, <span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>A single character string specifying the name of the element to add.</p></dd>


<dt><code>value</code></dt>
<dd><p>The object to add (e.g., a data.frame, list, or other metadata).</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>None. Modifies the <code>metadata</code> list in-place.</p>
</div>

</div><p></p><hr><a id="method-UserData-add_obs"></a><div class="section">
<h3 id="method-add-obs-">Method <code>add_obs()</code><a class="anchor" aria-label="anchor" href="#method-add-obs-"></a></h3>
<p>Adds a new observation dataset to <code>obs_data</code> or replaces an existing one.
Automatically logs the operation and adds provenance columns.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">user_data</span><span class="op">$</span><span class="fu">add_obs</span><span class="op">(</span><span class="va">name</span>, <span class="va">df</span>, source_file <span class="op">=</span> <span class="cn">NULL</span>, overwrite <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>Name of the observation source.</p></dd>


<dt><code>df</code></dt>
<dd><p>A data.frame containing the observation data.</p></dd>


<dt><code>source_file</code></dt>
<dd><p>the source file path</p></dd>


<dt><code>overwrite</code></dt>
<dd><p>Logical. If TRUE, replaces an existing entry with the same name.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>None. The object is modified in place.</p>
</div>

</div><p></p><hr><a id="method-UserData-show_obs_data"></a><div class="section">
<h3 id="method-show-obs-data-">Method <code>show_obs_data()</code><a class="anchor" aria-label="anchor" href="#method-show-obs-data-"></a></h3>
<p>Displays the first few rows of each observation dataset stored in <code>obs_data</code>.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">user_data</span><span class="op">$</span><span class="fu">show_obs_data</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>A list of data.frames (head of each dataset).</p>
</div>

</div><p></p><hr><a id="method-UserData-log_trace"></a><div class="section">
<h3 id="method-log-trace-">Method <code>log_trace()</code><a class="anchor" aria-label="anchor" href="#method-log-trace-"></a></h3>
<p>This function adds a new entry to the <code>traceability</code> log stored in the R6 object.
It records the type of operation, the target file or sheet name(s), and the timestamp.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">user_data</span><span class="op">$</span><span class="fu">log_trace</span><span class="op">(</span><span class="va">operation</span>, <span class="va">filename</span>, description <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>operation</code></dt>
<dd><p>A character string describing the action performed (e.g. <code>"import"</code>, <code>"export"</code>, <code>"update"</code>).</p></dd>


<dt><code>filename</code></dt>
<dd><p>A character string indicating the name(s) of the file or sheet involved in the operation.</p></dd>


<dt><code>description</code></dt>
<dd><p>A description of the operation to store in log</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-4">Returns<a class="anchor" aria-label="anchor" href="#returns-4"></a></h4>
<p>No return value. This function updates the internal <code>traceability</code> data frame.</p>
</div>

</div><p></p><hr><a id="method-UserData-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">user_data</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table des matières"><h2>Sur cette page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Développé par Xavier Delpuech, Hervé Maire, Anne-Sophie Chazalmartin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site créé avec <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

